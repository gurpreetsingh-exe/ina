type uniq[T] = {
    inner: *T,
}

fn uniq[T](i: &T) -> uniq[T] {
    let ptr = uniq![T] { inner: i as *T };
    ptr
}

fn deref[T](ptr: &uniq[T]) -> T {
    *(ptr.inner)
}

#[test]
fn with_type_params() {
    let a = uniq![i32](&69);
    assert deref![i32](&a) == 69;
    let b = uniq![uniq[i32]](&a);

    let c = deref![uniq[i32]](&b);
    assert deref![i32](&c) == 69;
}
